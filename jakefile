var paprika = require('./Build/node_modules/paprika'),
	msbuild = paprika.msbuild,
	path = require('path'),
	fs = require('fs'),
	config = {
		projectName: 'Facebook C# SDK',
		projectSafeName: 'FacebookCSharpSDK',
		version: fs.readFileSync('VERSION', 'utf-8'),
		paths: {
			root: path.normalize(__dirname)
		}
	};

console.log(config.projectName + ' v' + config.version);

msbuild.setDefaults({
	properties: { Configuration: 'Release' },
	processor: 'x86',
	version: 'net40'
});

namespace('build', function () {
	
	desc('Build .NET 4.0 binaries');
	task('net40', ['clean:net40'], function () {
		msbuild({
			file: 'Source/Facebook-Net40.sln',
			targets: ['Build']
		});
	});

	desc('Build .NET 3.5 binaries');
	task('net35', ['clean:net35'], function () {
		msbuild({
			file: 'Source/Facebook-Net35.sln',
			targets: ['Build']
		});
	});

	desc('Build Windows Phone 7.1 binaries');
	task('wp71', ['clean:wp71'], function () {
		msbuild({
			file: 'Source/Facebook-WP7.sln',
			targets: ['Build']
		})
	});

});

namespace('clean', function () {
	
	task('net40', function () {
		msbuild({
			file: 'Source/Facebook-Net40.sln',
			targets: ['Clean']
		});
	});

	task('net35', function () {
		msbuild({
			file: 'Source/Facebook-Net35.sln',
			targets: ['Clean']
		});
	});

	task('wp71', function () {
		msbuild({
			file: 'Source/Facebook-WP7.sln',
			targets: ['Clean']
		});
	});

});